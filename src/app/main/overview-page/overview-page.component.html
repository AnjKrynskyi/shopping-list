<ng-container *ngIf="records$ | async as records">
  <div class="headline">
    <h1>Get Started</h1>
    <p>Create new list or select one</p>
  </div>
  <ng-container>
    <ul class="records">
      <li
        class="records__item"
        *ngFor="let record of records"
        (click)="selectRecord($event, record)"
        [class.selected]="addSelectedClass(record.id)"
      >
        <div class="records__group">
          <i class="fas fa-file"></i>
          <span>{{ record.name | titlecase }}</span>
        </div>

        <div class="records__group">
          <p
            *ngIf="!record.updateDate"
          >Created: {{ record.createDate | fromNow }}</p>
          <p
            *ngIf="record.updateDate"
          >Updated: {{ record.updateDate | fromNow }}</p>

          <div class="records__more">
            <button
              class="btn b-icon small"
              (click)="clickedItemId = record.id"
            >
              <i class="fas fa-ellipsis-v"></i>
            </button>
            <ul
              class="dropdown-menu"
              *ngIf="clickedItemId === record.id"
            >
              <li>
                <i
                  class="fas fa-times"
                  (click)="clickedItemId = null"
                ></i>
              </li>
              <li
                (click)="deleteRecord(record)"
              >
                Delete
              </li>
            </ul>
          </div>
        </div>
      </li>
    </ul>

    <div class="create-record">
      <button
        class="btn b-icon large"
        (click)="createPopup = true"
      >
        <i class="fas fa-plus"></i>
      </button>
      <div
        class="overlay"
        (click)="closePopup($event)"
        *ngIf="createPopup"
      >
        <div class="panel">
          <label>List name</label>
          <div class="panel__group">
            <input
              type="text"
              class="input-field"
              [(ngModel)]="recordName"
              required
            >
            <button
              class="btn"
              [disabled]="!recordName"
              [class.success]="recordName"
              (keydown.enter)="createRecord()"
              (click)="createRecord()"
            >Create</button>
          </div>
        </div>
      </div>
    </div>
  </ng-container>
  <ng-template #loading>
    <app-fullscreen-loader></app-fullscreen-loader>
  </ng-template>
</ng-container>


